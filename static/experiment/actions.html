<section id="actions" ng-controller="ActionsCtrl">
  <div class="pure-g card transparent inner-seamless">
    <input ng-model="searchText" placeholder="Search (e.g. by action id)" class="card depth pure-u-1-2 seamless">
    <export class="pure-u-1-2"></export>
  </div>
  <div class="card inner-seamless depth">
    <table>
      <thead>
        <tr>
          <th class="type mini">
          </th>
          <!-- <th class="id mini" ng-click="predicate = 'id'; reverse = !reverse">
            Action Id
            <i ng-if="predicate === 'id'" class="icon" ng-class="{'ion-ios7-arrow-down': !reverse, 'ion-ios7-arrow-up': reverse}"></i>
          </th> -->
          <th class="variant mini" ng-click="predicate = 'variant'; reverse = !reverse">
            Variant
            <i ng-if="predicate === 'variant'" class="icon" ng-class="{'ion-ios7-arrow-down': !reverse, 'ion-ios7-arrow-up': reverse}"></i>
          </th>
          <th class="started-at mini" ng-init="predicate = 'started_at'" ng-click="predicate = 'started_at'; reverse = !reverse">
            Started at
            <i ng-if="predicate === 'started_at'" class="icon" ng-class="{'ion-ios7-arrow-down': !reverse, 'ion-ios7-arrow-up': reverse}"></i>
          </th>
          <th class="completed-at mini" ng-click="predicate = 'completed_at'; reverse = !reverse">
            Completed at
            <i ng-if="predicate === 'completed_at'" class="icon" ng-class="{'ion-ios7-arrow-down': !reverse, 'ion-ios7-arrow-up': reverse}"></i>
          </th>
          <th class="ip mini" ng-click="predicate = 'ip'; reverse = !reverse">
            IP
            <i ng-if="predicate === 'ip'" class="icon" ng-class="{'ion-ios7-arrow-down': !reverse, 'ion-ios7-arrow-up': reverse}"></i>
          </th>
          <th class="browser mini" ng-click="predicate = user_agent['browser']; reverse = !reverse">
            Browser
            <i ng-if="predicate === user_agent['browser']" class="icon" ng-class="{'ion-ios7-arrow-down': !reverse, 'ion-ios7-arrow-up': reverse}"></i>
          </th>
          <th class="browser mini" ng-click="predicate = 'os'; reverse = !reverse">
            OS
            <i ng-if="predicate === 'os'" class="icon" ng-class="{'ion-ios7-arrow-down': !reverse, 'ion-ios7-arrow-up': reverse}"></i>
          </th>
          <!-- <th class="archive mini"></th> -->
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="action in actions | filter:searchText | orderBy:predicate:reverse | offset: actionsCurrentPage*actionsPerPage | limitTo: actionsPerPage">
          <td class="type mini right">
            <span class="type" ng-class="action.type">{{action.type}}</span>
          </td>
          <!-- <td class="id mini">
            <span class="id">{{action.id}}</span>
          </td> -->
          <td class="variant mini">
            {{action.variant}}
          </td>
          <td class="started-at mini">
            <span am-time-ago="action.started_at"></span>
          </td>
          <td class="completed-at mini">
            <span am-time-ago="action.completed_at"></span>
          </td>
          <td class="ip mini">
            {{action.ip}}
          </td>
          <td class="browser mini">
            {{action.browser}}
          </td>
          <td class="os mini">
            {{action.os}}
          </td>
          <!-- <td class="active mini" ng-click="action.active = !action.active; updateExperiment(action)"><span ng-class="{ 'active': action.active, 'inactive': !action.active }"><i class="icon ion-ios7-circle-filled"></i></span></td>
          <td class="archive mini" ng-click="action.archived = !action.archived; updateExperiment(action)"><i class="icon" ng-class="{ 'ion-reply': action.archived, 'ion-ios7-filing-outline': !action.archived }"></i></td> -->
        </tr>
      </tbody>
    </table>
  </div>

  <footer class="pure-g card inner-seamless transparent pagination">
    <div class="pure-u-2-5 left">
      <button ng-click="actionsCurrentPage = actionsCurrentPage - 1" ng-disabled="actionsCurrentPage === 0">
        <i class="icon ion-chevron-left"></i>
        Previous Page
      </button>
    </div>
    <div class="pure-u-1-5 center status">
      {{actionsCurrentPage+1}} / {{actionsPageCount()+1}}
    </div>
    <div class="pure-u-2-5 right">
      <button ng-click="actionsCurrentPage = actionsCurrentPage + 1" ng-disabled="actionsCurrentPage === actionsPageCount()">
        Next Page
        <i class="icon ion-chevron-right"></i>
      </button>
    </div>
  </footer>
</section>
