<section id="experiment" class="pure-g">
  <div class="pure-u-1-3">
    <header class="depth1 card">
      <input type="text" ng-model="experiment.name" ng-focus="experiment.originalName = experiment.name" ng-blur="updateExperiment(experiment)">
      <small>Click to change experiment name</small>
    </header>
    <section class="depth1 card">
      <h3>Status</h3>

      <i ng-click="experiment.active = !experiment.active; updateExperiment(experiment)" ng-class="{ 'active': experiment.active, 'inactive': !experiment.active }" class="icon ion-ios7-circle-filled"></i>
      <small ng-if="experiment.active">This project is currently active</small>
      <small ng-if="!experiment.active">This project is currently inactive</small>

      <br>

      <i ng-click="experiment.archived = !experiment.archived; updateExperiment(experiment)" class="icon" ng-class="{ 'ion-reply': experiment.archived, 'ion-ios7-filing-outline': !experiment.archived }"></i>
      <small ng-if="experiment.archived">This project has been archived</small>
      <small ng-if="!experiment.archived">This project has not been archived</small>
    </section>
    <section class="depth1 card">
      {{startDate}}
      <input type="date" ng-model="startDate">
      <input type="date" ng-model="endDate">
    </section>

    <section class="ago">
      created <span am-time-ago="experiment.created_at"></span> | {{actions.length}} action<span ng-if="actions.length !== 1">s</span> | {{experiment.name}} |
      <a href="" ng-click="resetExperiment(experiment)">Reset</a> | <a href="" ng-click="deleteExperiment(experiment)">Delete</a>
    </section>
  </div>
  <div class="pure-u-2-3">
    <div class="depth1 card inner-seamless">
      <textarea placeholder="Add a description (optional)" ng-model="experiment.description" ng-blur="updateExperiment(experiment)"></textarea>
    </div>

    <div class="actions card transparent right">
      <button ng-click="experiment.archived = !experiment.archived; updateExperiment(experiment)">
        <i class="icon" ng-class="{ 'ion-reply': experiment.archived, 'ion-ios7-filing-outline': !experiment.archived }"></i>
        <span ng-if="experiment.archived">Unarchive</span>
        <span ng-if="!experiment.archived">Archive</span>
      </button>
      <button ng-click="experiment.active = !experiment.active; updateExperiment(experiment)">
        <i class="icon" ng-class="{ 'ion-reply': experiment.active, 'ion-ios7-filing-outline': !experiment.archived }"></i>
        <span ng-if="experiment.active">Inactivate</span>
        <span ng-if="!experiment.active">Activate</span>
      </button>
      <button ng-click="resetExperiment(experiment)">
        Reset
      </button>
    </div>
    <section class="depth5 card setup-initial" ng-if="actions.length === 0">
      <h1>Boom!</h1>
      <p class="lead">
        Looks like there aren't any registered actions for this experiment. Start tracking conversions by installing our client so we can start showing you pretty tables and charts.
      </p>
      <code>
<pre>
&lt;script src=&quot;http://alex.dev:3000/abcd.bundle.js&quot;&gt;&lt;/script&gt;
</pre>
      </code>
      <code>
<pre>&lt;script&gt;
var experiment = abcd.experiment('{{experiment.id}}')

experiment.variant('control', function () {
  console.log('I am in the control group :(');
})
.variant('blue button', function () {
  $('button').css({ background: 'blue' });
})
.variant('yellow button', function () {
  $('button').css({ background: 'yellow' });
})
.start();

$('button').on('click', function () {
  experiment.convert();
});
&lt;/script&gt;
</pre>
      </code>
      <br>
      <p>
        Can it be that easy? There is only one way to find out.
      </p>
    </section>
    <section class="depth1 card inner-seamless" ng-if="actions.length > 0">
      <table>
        <thead>
          <tr>
            <th ng-click="predicate = 'variant'; reverse = !reverse">
              Variant
              <i ng-if="predicate === 'variant'" class="icon" ng-class="{'ion-ios7-arrow-down': !reverse, 'ion-ios7-arrow-up': reverse}"></i>
            </th>
            <th ng-click="predicate = 'conversions'; reverse = !reverse">
              Conversions/ Views
              <i ng-if="predicate === 'conversions'" class="icon" ng-class="{'ion-ios7-arrow-down': !reverse, 'ion-ios7-arrow-up': reverse}"></i>
            </th>
            <th ng-click="predicate = 'conversionRate'; reverse = !reverse">
              Conversion Rate
              <i ng-if="predicate === 'conversionRate'" class="icon" ng-class="{'ion-ios7-arrow-down': !reverse, 'ion-ios7-arrow-up': reverse}"></i>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="(variant, result) in summary.variants | orderBy:predicate:reverse">
            <td>{{variant}}</td>
            <td>{{result.conversions}} / {{result.actions}}</td>
            <td>{{(result.conversions / result.actions) * 100 | number:2}} %</td>
          </tr>
        </tbody>
      </table>
    </section>
    <section class="depth1 card inner-seamless chart">
      <linechart data="usage" options="options" mode=""></linechart>
    </section>
    <section class="export right" ng-if="actions.length > 0">
      <a href="/api/experiments/{{experiment.id}}/actions.csv?token={{token}}">Export as CSV</a>
      <a href="/api/experiments/{{experiment.id}}/actions?token={{token}}">Export as JSON</a>
    </section>
  </div>


  <!-- <div class="depth1 card pure-g">
    <input class="pure-u-1-2" ng-model="experiment.name" class="experiment-name">
    <div class="pure-u-1-2">

    </div>
    <p class="pure-u-1-1">Just a really cool experiment description</p>
    <div class="pure-u-1-2 right">
    </div>
  </div>
  <div class="pure-g">
    <div class="pure-u-3-4">
      <nav class="card seamless">
        <a href="" ng-click="active = graph">Results</a>
        <a href="" ng-click="active = graph">Settings</a>
        <a href="" ng-click="active = graph">Setup</a>

      </nav>
      <div class="depth1 card pure-g seamless summary">
        <div class="pure-u-1-4">
          <h1>{{experiment.actions.size()}}</h1>
          actions
        </div>
        <div class="pure-u-1-4">
          <h1>{{experiment.actions.size()}}</h1>
          conversions
        </div>
        <div class="pure-u-1-4">
          <h1>3</h1>
          variants
        </div>
        <div class="pure-u-1-4">
          <h1>80%</h1>
          max. conversion rate
        </div>
      </div>
      <div class="depth1 card seamless">
        GRAPH
      </div>
      <div class="depth1 card seamless">
        ACTIONS
      </div>
    </div>

    <div class="pure-u-1-4">
      <div class="card depth1 seamless">
        <a href="">Download as CSV</a><br>
        <a href="">Download as JSON</a>
      </div>
    </div>
  </div> -->
</section>
